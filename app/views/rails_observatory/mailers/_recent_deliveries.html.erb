<turbo-frame id="recent-<%= @direction %>-deliveries">
  <%= render 'query_table',
    attributes: { id: "recent-mail-deliveries-#{@direction}" },
    events: @deliveries,
    fields: [:time, :mailer, :from, :to, :subject],
    formatters: {
      time: ->(time, delivery) {
        link_to Time.at(time).strftime('%H:%M:%S'),
                preview_mail_path(delivery.message_id),
                data: { turbo_frame: '_top' }
      }
    },
    pagination: { page: @page, total_pages: @total_pages, per_page: @per_page, params: { direction: @direction } }
  %>
</turbo-frame>
